<section data-theme="javascript">
  <h1>JS</h1>
  <h2>scope</h2>
</section>

<section>
  <h3>Scope and vars <span class="pager">(1/4)</span></h3>
  <ul>
    <li class="fragment" data-fragment-index="1">
      JS has these kinds of scope:
      <ul>
        <li>Global scope</li>
        <li>Module scope <sup class="es-version">ES2015</sup></li>
        <li>Block scope <sup class="es-version">ES2015</sup></li>
        <li class="fragment strike" data-fragment-index="4">Function scope</li>
      </ul>
    </li>
    <li class="fragment" data-fragment-index="2">
      JS has 3 ways to declare variables:
      <ul>
        <li class="fragment strike" data-fragment-index="4">
          <code>var</code> <small class="fragment" data-fragment-index="3">(function scope)</small>
        </li>
        <li>
          <code>const</code> <sup class="es-version">ES2015</sup>
          <small class="fragment" data-fragment-index="3">(block scope)</small>
        </li>
        <li>
          <code>let</code> <sup class="es-version">ES2015</sup>
          <small class="fragment" data-fragment-index="3">(block scope)</small>
        </li>
      </ul>
    </li>
    <li class="fragment" data-fragment-index="4">There's no reason to use <code>var</code> anymore.</li>
  </ul>
</section>

<section>
  <h3>Global and module scope <span class="pager">(2/4)</span></h3>
  <ul>
    <li>
      The <em>keyword</em> for the global scope depends on the environment:
      <ul class="fragment">
        <li><code>window</code>: browsers</li>
        <li><code>self</code>: browsers, web workers</li>
        <li><code>global</code>: Node.js</li>
        <li><code>globalThis</code><sup class="es-version glow">ES2020</sup>: all environments</li>
      </ul>
    </li>
    <li class="fragment">
      Anything declared in <em>module scope</em> is only available in that module <small>(until it's exported)</small>.
    </li>
  </ul>
</section>

<section>
  <h3>Block scope <span class="pager">(3/4)</span></h3>
  <ul>
    <li>
      Any variable declared between <code>{</code> and <code>}</code> has block scope.
      <div class="row">
        <div class="col fragment">
          <small>Except with <code>var</code>:</small>
          <pre><code data-trim class="js">
            { var a = 1 };
            a;  // 1
          </code></pre>
        </div>
        <div class="col fragment">
          <small>⚠️ Don't confuse it with object literals:</small>
          <pre><code data-trim data-noescape class="js">
            const o = { const a = 1 };
            <small style="letter-spacing: -.5px;">// Uncaught SyntaxError: Unexpected identifier</small>
          </code></pre>
        </div>
      </div>
    </li>
    <li class="fragment">
      Both <code>const</code> and <code>let</code> forbid access before declaration:
      <pre><code data-trim class="js">
        {
          a;  // Uncaught ReferenceError: Cannot access 'a' before initialization
          const a = 1;
        };
      </code></pre>
    </li>
  </ul>
</section>

<section>
  <h3><code>const</code> vs <code>let</code> <span class="pager">(4/4)</span></h3>
  <ul>
    <li>
      <code>const</code> declares a variable that <em>can't</em> be reassigned
      <small>(like <code>final</code> in Java)</small>:
      <pre class="fragment"><code data-trim class="js">
        const a = 1;
        a = 2;  // Uncaught TypeError: Assignment to constant variable.
      </code></pre>
      <div class="fragment">
        ⚠️ Not to be confused with immutability! Object properties can still be mutated:
        <pre><code data-trim class="js">
          const o = { a: 1 };
          o.a = 2;      // 2
        </code></pre>
      </div>
    </li>
    <li class="fragment">
      <code>let</code> declares a variable that <em>may</em> be reassigned.
      <pre><code data-trim data-noescape class="js">
        let a = 1;
        a = 2;        // 2
      </code></pre>
    </li>
  </ul>
</section>
